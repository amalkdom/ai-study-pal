<!DOCTYPE html>
<html>
<head>
<title>Analytics</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{background:#0f172a;color:white;font-family:Arial;padding:40px;}
.card{background:#111827;padding:20px;border-radius:10px;margin-bottom:20px;}
</style>
</head>
<body>

<h2>Performance Analytics</h2>

<div class="card">
<canvas id="historyChart"></canvas>
</div>

<div class="card">
<h3>ML Metrics</h3>
<p>Precision: {{ stats.precision }}</p>
<p>Recall: {{ stats.recall }}</p>
<p>F1 Score: {{ stats.f1 }}</p>
<p>Current Difficulty: {{ stats.difficulty_level }}</p>
</div>

<div class="card">
<h3>Weak Concepts</h3>
<ul>
{% for concept, count in stats.concept_mistakes.items() %}
<li>{{ concept }} (Mistakes: {{ count }})</li>
{% endfor %}
</ul>
</div>

<script>
new Chart(document.getElementById("historyChart"),{
type:"line",
data:{
labels: {{ stats.quiz_history|tojson }},
datasets:[{
label:"Accuracy %",
data: {{ stats.quiz_history|tojson }},
borderColor:"#6366f1"
}]
}
});
</script>

</body>
</html>
